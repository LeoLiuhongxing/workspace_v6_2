/*
 * led_driver.c
 *
 *  Created on: 2017年12月2日
 *      Author: leo
 */

#include "IIC.h"
#include <stdbool.h>

void led_control(bool led_state)
{
	unsigned char Dev_addr;
	unsigned char AddrLow;
	unsigned char AddrHigh;
	unsigned int tmp;

	tmp = ((unsigned int)page) << 6; //得出页首地址
	AddrLow = (unsigned char)tmp;
	AddrHigh = (unsigned char)(tmp>>8);
	Dev_addr = 0xa0 | (AddrHigh << 1);
	i2c_start();
	i2c_SendByte(Dev_addr);
	if(i2c_check_ACK() == FALSE)
	{
	return AckError;
	}
	i2c_delay_ms(5);
	i2c_SendByte(AddrHigh);
	if(i2c_check_ACK() == FALSE)
	{
	return AckError;
	}
	i2c_SendByte(AddrLow);
	if(i2c_check_ACK() == FALSE)
	{
	return AckError;
	}
	while(n--)
	{
	i2c_SendByte(*p++);
	if(i2c_check_ACK() == FALSE)
	{
	 return AckError;
	}
	}
	i2c_stop();
	i2c_delay_ms(10);
	return 0;
}


